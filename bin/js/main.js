"use strict";var é=function(e){return document.querySelector(e)},ç=function(e){return document.createElement(e)},Parser=function(){function e(e){var t={ajax:function(e,t){var n=new Promise(function(n,r){var a=new XMLHttpRequest,i=t;a.open(e,i),a.send(),a.onload=function(){this.status>=200&&this.status<300?n(this.response):r(this.statusText)},a.onerror=function(){r(this.statusText)}});return n}};return{get:function(){return t.ajax("GET",e)}}}return{fetchContent:function(){function t(t,n){var r=n?t:"bin/js/json/"+t+".json",a={success:function(e){e=n?e:JSON.parse(e),n?Render.getPart(e,n):Render.buildList(e,t)},error:function(e){throw new Error(e)}};e(r).get().then(a.success).catch(a.error)}var n=new Map([["header","bin/partials/header.html"],[".contact","bin/partials/contact.html"],["aside","bin/partials/aside.html"]]),r=["experience"],a=!0,i=!1,s=void 0;try{for(var c,o=n[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var l=c.value;t(l[1],l[0])}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}var d=!0,u=!1,g=void 0;try{for(var m,f=r[Symbol.iterator]();!(d=(m=f.next()).done);d=!0){var h=m.value;t(h)}}catch(e){u=!0,g=e}finally{try{!d&&f.return&&f.return()}finally{if(u)throw g}}},fetchGigs:function(){var t="//spreadsheets.google.com/feeds/list/1Tf2vRy6me9F3knQSA5FpfvrTLuNetlkd0Mmb2P20Jqo/1/public/values?alt=json",n={success:function(e){var t=JSON.parse(e),n=t.feed.entry,r=t.feed.updated.$t;r="Last updated: "+r.substr(0,10),é("#attended-gigs .mdl-spinner").remove(),é("#gigs .mdl-tooltip").innerHTML=r;var a=document.getElementById("giglist");for(var i in n)if(i>0&&Tables.gigList(n[i].gsx$headline.$t,n[i].gsx$text.$t,n[i].gsx$startdate.$t),i==n.length-1){sorttable.makeSortable(a);var s={valueNames:["gig-name","gig-location","gig-date"]};new List("attended-gigs",s)}},error:function(e){throw new Error(e)}};e(t).get().then(n.success).catch(n.error)},fetchBeer:function(){var t="//spreadsheets.google.com/feeds/list/1a056ruITWMr8oeJECb8QM6ePe00IqTTEIkrkhY-QeMI/1/public/values?alt=json",n={success:function(e){var t=JSON.parse(e),n=t.feed.entry,r=t.feed.updated.$t;r="Last updated: "+r.substr(0,10),é("#untappd-stats .mdl-spinner").remove(),é("#beers .mdl-tooltip").innerHTML=r;var a=document.getElementById("beerlist");for(var i in n){var s=n[i].gsx$createdat.$t;if(s=s.substr(0,10),i>0&&Tables.beerList(n[i].gsx$breweryname.$t,n[i].gsx$beername.$t,n[i].gsx$beertype.$t,n[i].gsx$beerabv.$t,n[i].gsx$ratingscore.$t,s),i==n.length-1){sorttable.makeSortable(a);var c={valueNames:["brewery","beer-name","beer-type","beer-abv","beer-rating","beer-date"]};new List("untappd-stats",c)}}},error:function(e){throw new Error(e)}};e(t).get().then(n.success).catch(n.error)}}}(),Render={settings:{createEl:"div",parentEl:"main"},buildList:function(e,t){function n(e,t,n){return e=ç(e),e.appendChild(document.createTextNode(t)),n&&e.setAttribute("href","//"+t),e}e=e.items;var r=é("."+t),a=ç("ul"),i=!0,s=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){for(var d=o.value,u=ç("li"),g=[n("h2",d.title),n("h3",d.position),n("time",d.dateFrom),n("span","—"),n("time",d.dateTo),d.url&&n("a",d.url,1)],m=document.createDocumentFragment(),f=0;f<g.length;f++)g[f]&&m.appendChild(g[f]);u.appendChild(m),a.appendChild(u)}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}r.appendChild(a)},getPart:function(e,t){if(~t.indexOf(".")){t=t.substr(1);var n=ç(this.settings.createEl);n.classList.add(t),n.innerHTML=e,n.onclick=Interact.toggleClicked;var r=é(this.settings.parentEl);r.appendChild(n)}else{var a=é(t);n=ç(t),n.innerHTML=e,n.onclick=Interact.toggleClicked,document.body.replaceChild(n,a),~t.indexOf("aside")&&Age.calc()}},init:function(){Request.isIndex()&&Parser.fetchContent(),Request.isPage("/stats/")&&Parser.fetchGigs(),Parser.fetchBeer()}},Interact={toggleClicked:function(){var e=this.nodeName;if("HEADER"==e||"contact"==this.classList){var t=é("header");"clicked"==t.className?t.className="reverse":t.className="clicked"}}},Age={calc:function(){var e=é("time"),t=e.getAttribute("datetime"),n=new Date,r=[n.getFullYear(),n.getMonth()+1,("0"+n.getDate()).slice(-2)],a=[t.slice(0,4),t.slice(5,7),t.slice(8,10)];r=r.join(""),a=a.join("");var i=(r-a).toString().slice(0,2);e.innerHTML=i+","}},Request={isIndex:function(){if("/"==document.location.pathname)return!0},isPage:function(e){if(document.location.pathname==e)return!0}},Tables={gigList:function(e,t,n){var r=document.createDocumentFragment(),a=é("#giglist tbody"),i='<td class="mdl-data-table__cell--non-numeric gig-name">\n                '+e+'\n            </td>\n            <td class="mdl-data-table__cell--non-numeric gig-location">\n                '+t+'\n            </td>\n            <td class="gig-date">'+n+"</td>",s=ç("tr");s.innerHTML=i,r.appendChild(s),a.appendChild(r)},beerList:function(e,t,n,r,a,i){var s=document.createDocumentFragment(),c=é("#beerlist tbody"),o='<td class="mdl-data-table__cell--non-numeric brewery">\n                '+e+'\n            </td>\n            <td class="mdl-data-table__cell--non-numeric beer-name">\n                '+t+'\n            </td>\n            <td class="mdl-data-table__cell--non-numeric beer-type">\n                '+n+'\n            </td>\n            <td class="beer-abv">'+r+'</td>\n            <td class="beer-rating">'+a+'</td>\n            <td class="beer-date">'+i+"</td>",l=ç("tr");l.innerHTML=o,s.appendChild(l),c.appendChild(s)}};window.addEventListener("DOMContentLoaded",function(){Render.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiw6kiLCJzZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIsOnIiwiY3JlYXRlRWxlbWVudCIsIlBhcnNlciIsIiRodHRwIiwidXJsIiwiY29yZSIsImFqYXgiLCJtZXRob2QiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjbGllbnQiLCJYTUxIdHRwUmVxdWVzdCIsInVyaSIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwidGhpcyIsIm9ubG9hZCIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJnZXQiLCJmZXRjaENvbnRlbnQiLCJmZXRjaEZpbGUiLCJmIiwiZSIsImZpbGUiLCJjYWxsYmFjayIsInN1Y2Nlc3MiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiUmVuZGVyIiwiZ2V0UGFydCIsImJ1aWxkTGlzdCIsImVycm9yIiwiRXJyb3IiLCJ0aGVuIiwiY2F0Y2giLCJwYXJ0aWFscyIsIk1hcCIsImZpbGVzIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJwYXJ0IiwidmFsdWUiLCJlcnIiLCJyZXR1cm4iLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJmZXRjaEdpZ3MiLCJnaWdzIiwiY2VsbHMiLCJ0aXRsZSIsImZlZWQiLCJlbnRyeSIsInVwZGF0ZWQiLCIkdCIsInN1YnN0ciIsInJlbW92ZSIsImlubmVySFRNTCIsInNvcnQiLCJnZXRFbGVtZW50QnlJZCIsInQiLCJUYWJsZXMiLCJnaWdMaXN0IiwiZ3N4JGhlYWRsaW5lIiwiZ3N4JHRleHQiLCJnc3gkc3RhcnRkYXRlIiwibGVuZ3RoIiwic29ydHRhYmxlIiwibWFrZVNvcnRhYmxlIiwib3B0aW9ucyIsInZhbHVlTmFtZXMiLCJMaXN0IiwiZmV0Y2hCZWVyIiwiYmVlciIsImRhdGVUcmltIiwiYmVlckxpc3QiLCJnc3gkYnJld2VyeW5hbWUiLCJnc3gkYmVlcm5hbWUiLCJnc3gkYmVlcnR5cGUiLCJnc3gkYmVlcmFidiIsImdzeCRyYXRpbmdzY29yZSIsInVzZXJMaXN0Iiwic2V0dGluZ3MiLCJjcmVhdGVFbCIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiY29udGVudCIsImF0dHIiLCJzZXRBdHRyaWJ1dGUiLCJpdGVtcyIsInVsIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwibiIsInRlbXAiLCJidWlsZCIsInBvc2l0aW9uIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJkb2NGcmFnIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImkiLCJsaSIsImluZGV4T2YiLCJjbGFzc0xpc3QiLCJhZGQiLCJvbmNsaWNrIiwiSW50ZXJhY3QiLCJ0b2dnbGVDbGlja2VkIiwicGFyZW50IiwiZWxlbSIsImJvZHkiLCJyZXBsYWNlQ2hpbGQiLCJBZ2UiLCJjYWxjIiwiUmVxdWVzdCIsImlzSW5kZXgiLCJpc1BhZ2UiLCJjbGlja2VkIiwibm9kZU5hbWUiLCJlbCIsImNsYXNzTmFtZSIsInRpbWUiLCJ0b2RheSIsIkRhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsInNsaWNlIiwiYmlydGgiLCJqb2luIiwiYWdlIiwibm93IiwidG9TdHJpbmciLCJwYXRobmFtZSIsImxvY2F0aW9uIiwibmFtZSIsImRhdGUiLCJmcmFnIiwibGlzdCIsImdpZyIsInRyIiwiYnJld2VyeSIsImJOYW1lIiwiYlR5cGUiLCJiQWJ2IiwiYlJhdGluZyIsImJEYXRlIiwiYnJldyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbml0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RUFBS00sTUFBTSxFQUFFLElBckN4RGxDLEdBQUFBLEVBQUt2QyxLQUFBQSxJQXdDVDBFLEVBQVFBLEVBQU1DLEtBQUssR0FFbkIsSUFBSUMsSUFBT0MsRUFBTUgsR0FBT0ksV0FBV0wsTUFBTSxFQUFFLEVBdEN2Q1IsR0FBQWpFLFVBQUE0RSxFQUFBLE1BNENSaEIsU0FyQ0lDLFFBQUlELFdBQ0osR0FBK0JuSSxLQUEzQm1JLFNBQVFFLFNBQU9pQixTQUN0QixPQUFBLEdBSUQzQixPQUFBQSxTQUFXekgsR0F3Q1AsR0FBSU4sU0FBUzJKLFNBQVNELFVBQVlwSixFQXRDdEMwSCxPQUFlLElBTWRqRCxRQTBDREMsUUFBUyxTQUFTNEUsRUFBTUQsRUFBVUUsR0F0Q2xDeEIsR0FBTXlCLEdBQUE5SixTQUFBd0gseUJBd0NFdUMsRUFBT2pLLEVBQUUsa0JBdENYa0ssRUFBQUEsNEVBQ09sSyxFQURQLGlIQUlFaUosRUFKRix5REFNd0JjLEVBTnhCLFFBUUZMLEVBQU1BLEVBQUlGLEtBQ1ZELEdBQUFBLFVBQWNDLEVBd0NkUSxFQUFLdkQsWUFBWTBELEdBdENqQkYsRUFBSVIsWUFBYUYsSUEwQ3JCeEQsU0FBVSxTQUFTcUUsRUFBU0MsRUFBT0MsRUFBT0MsRUFBTUMsRUFBU0MsR0F2RDdELEdBQUFULEdBQUE5SixTQUFBd0gseUJBeURZdUMsRUFBT2pLLEVBQUUsbUJBRVQwSyxFQUFBQSwyRUF0Q0NOLEVBc0NELDhHQW5DSEMsRUFtQ0csOEdBaENBQyxFQWdDQSx5REE5QkFDLEVBOEJBLDhDQTdCSEMsRUE2QkcsNENBNUJQQyxFQTRCTyxRQXhDWk4sRUFBQS9KLEVBQUEsS0FzRFErSixHQUFHdEYsVUFBWTZGLEVBdENuQnpGLEVBQVN3QixZQUFBMEQsR0FDVEYsRUFBQXhELFlBQUF1RCxJQUtJVyxRQUFBQyxpQkFBSVYsbUJBQUFBLFdBd0NSNUgsT0FBT3VJIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgw6kgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59O1xuXG52YXIgw6cgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChzZWxlY3Rvcik7XG59O1xuXG52YXIgUGFyc2VyID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgZnVuY3Rpb24gJGh0dHAodXJsKXtcbiAgICAgICAgdmFyIGNvcmUgPSB7XG4gICAgICAgICAgICBhamF4OiBmdW5jdGlvbihtZXRob2QsIHVybCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVyaSA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9wZW4obWV0aG9kLCB1cmkpO1xuICAgICAgICAgICAgICAgICAgICBjbGllbnQuc2VuZCgpO1xuICAgICAgICAgICAgICAgICAgICBjbGllbnQub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjbGllbnQub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb3JlLmFqYXgoJ0dFVCcsIHVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcblxuICAgICAgICBmZXRjaENvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IHBhcnRpYWxzID0gbmV3IE1hcChbXG4gICAgICAgICAgICAgICAgWydoZWFkZXInLCAnYmluL3BhcnRpYWxzL2hlYWRlci5odG1sJ10sXG4gICAgICAgICAgICAgICAgWycuY29udGFjdCcsICdiaW4vcGFydGlhbHMvY29udGFjdC5odG1sJ10sXG4gICAgICAgICAgICAgICAgWydhc2lkZScsICdiaW4vcGFydGlhbHMvYXNpZGUuaHRtbCddXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGxldCBmaWxlcyA9IFtcbiAgICAgICAgICAgICAgICAnZXhwZXJpZW5jZSdcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydGlhbHMpIHtcbiAgICAgICAgICAgICAgICBmZXRjaEZpbGUocGFydFsxXSwgcGFydFswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgICAgICBmZXRjaEZpbGUoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBmZXRjaEZpbGUoZiwgZSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWxlID0gZSA/IGYgOiAnYmluL2pzL2pzb24vJytmKycuanNvbic7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZSA/IGRhdGEgOiBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZW5kZXIuZ2V0UGFydChkYXRhLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBSZW5kZXIuYnVpbGRMaXN0KGRhdGEsIGYpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkaHR0cChmaWxlKS5nZXQoKVxuICAgICAgICAgICAgICAgIC50aGVuKGNhbGxiYWNrLnN1Y2Nlc3MpXG4gICAgICAgICAgICAgICAgLmNhdGNoKGNhbGxiYWNrLmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZmV0Y2hHaWdzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBGT1IgVEhFIC9naWdzLyBQQUdFIE9OTFlcbiAgICAgICAgICAgIGxldCBnaWdzID0gJy8vc3ByZWFkc2hlZXRzLmdvb2dsZS5jb20vZmVlZHMvbGlzdC8xVGYydlJ5Nm1lOUYza25RU0E1RnBmdnJUTHVOZXRsa2QwTW1iMlAyMEpxby8xL3B1YmxpYy92YWx1ZXM/YWx0PWpzb24nO1xuXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBjZWxscy5mZWVkLmVudHJ5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZCA9IGNlbGxzLmZlZWQudXBkYXRlZC4kdDtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZCA9IGBMYXN0IHVwZGF0ZWQ6ICR7dXBkYXRlZC5zdWJzdHIoMCwxMCl9YDtcbiAgICAgICAgICAgICAgICAgICAgw6koJyNhdHRlbmRlZC1naWdzIC5tZGwtc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICDDqSgnI2dpZ3MgLm1kbC10b29sdGlwJykuaW5uZXJIVE1MID0gdXBkYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2lnbGlzdCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgaW4gdGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID4gMCkgVGFibGVzLmdpZ0xpc3QodGl0bGVbdF0uZ3N4JGhlYWRsaW5lLiR0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVbdF0uZ3N4JHRleHQuJHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVt0XS5nc3gkc3RhcnRkYXRlLiR0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID09IHRpdGxlLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0dGFibGUubWFrZVNvcnRhYmxlKHNvcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU5hbWVzOiBbJ2dpZy1uYW1lJywgJ2dpZy1sb2NhdGlvbicsICdnaWctZGF0ZSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlckxpc3QgPSBuZXcgTGlzdCgnYXR0ZW5kZWQtZ2lncycsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJMaXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRodHRwKGdpZ3MpLmdldCgpXG4gICAgICAgICAgICAudGhlbihjYWxsYmFjay5zdWNjZXNzKVxuICAgICAgICAgICAgLmNhdGNoKGNhbGxiYWNrLmVycm9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgZmV0Y2hCZWVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxldCBiZWVyID0gJy8vc3ByZWFkc2hlZXRzLmdvb2dsZS5jb20vZmVlZHMvbGlzdC8xYTA1NnJ1SVRXTXI4b2VKRUNiOFFNNmVQZTAwSXFUVEVJa3JraFktUWVNSS8xL3B1YmxpYy92YWx1ZXM/YWx0PWpzb24nO1xuXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBjZWxscy5mZWVkLmVudHJ5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZCA9IGNlbGxzLmZlZWQudXBkYXRlZC4kdDtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZCA9IGBMYXN0IHVwZGF0ZWQ6ICR7dXBkYXRlZC5zdWJzdHIoMCwxMCl9YDtcbiAgICAgICAgICAgICAgICAgICAgw6koJyN1bnRhcHBkLXN0YXRzIC5tZGwtc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICDDqSgnI2JlZXJzIC5tZGwtdG9vbHRpcCcpLmlubmVySFRNTCA9IHVwZGF0ZWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JlZXJsaXN0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCBpbiB0aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVUcmltID0gdGl0bGVbdF0uZ3N4JGNyZWF0ZWRhdC4kdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUcmltID0gZGF0ZVRyaW0uc3Vic3RyKDAsMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiAwKSBUYWJsZXMuYmVlckxpc3QodGl0bGVbdF0uZ3N4JGJyZXdlcnluYW1lLiR0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVbdF0uZ3N4JGJlZXJuYW1lLiR0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVbdF0uZ3N4JGJlZXJ0eXBlLiR0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVbdF0uZ3N4JGJlZXJhYnYuJHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVt0XS5nc3gkcmF0aW5nc2NvcmUuJHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlVHJpbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9PSB0aXRsZS5sZW5ndGgtMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydHRhYmxlLm1ha2VTb3J0YWJsZShzb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVOYW1lczogWydicmV3ZXJ5JywgJ2JlZXItbmFtZScsICdiZWVyLXR5cGUnLCAnYmVlci1hYnYnLCAnYmVlci1yYXRpbmcnLCAnYmVlci1kYXRlJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VyTGlzdCA9IG5ldyBMaXN0KCd1bnRhcHBkLXN0YXRzJywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckxpc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJGh0dHAoYmVlcikuZ2V0KClcbiAgICAgICAgICAgIC50aGVuKGNhbGxiYWNrLnN1Y2Nlc3MpXG4gICAgICAgICAgICAuY2F0Y2goY2FsbGJhY2suZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG59KSgpO1xuXG52YXIgUmVuZGVyID0ge1xuXG4gICAgc2V0dGluZ3M6IHtcbiAgICAgICAgY3JlYXRlRWw6ICdkaXYnLFxuICAgICAgICBwYXJlbnRFbDogJ21haW4nXG4gICAgfSxcblxuICAgIGJ1aWxkTGlzdDogZnVuY3Rpb24oZGF0YSwgZikge1xuICAgICAgICBkYXRhID0gZGF0YS5pdGVtcztcbiAgICAgICAgdmFyIHBhcmVudCA9IMOpKCcuJysgZik7XG4gICAgICAgIHZhciB1bCA9IMOnKCd1bCcpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkKGVsZW1lbnQsIGNvbnRlbnQsIGF0dHIpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSDDpyhlbGVtZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29udGVudCkpO1xuICAgICAgICAgICAgYXR0ciAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICcvLycgKyBjb250ZW50KTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBsaSA9IMOnKCdsaScpO1xuXG4gICAgICAgICAgICB2YXIgdGVtcCA9IFtcbiAgICAgICAgICAgICAgICBidWlsZCgnaDInLCBuLnRpdGxlKSxcbiAgICAgICAgICAgICAgICBidWlsZCgnaDMnLCBuLnBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgICBidWlsZCgndGltZScsIG4uZGF0ZUZyb20pLFxuICAgICAgICAgICAgICAgIGJ1aWxkKCdzcGFuJywgJ+KAlCcpLFxuICAgICAgICAgICAgICAgIGJ1aWxkKCd0aW1lJywgbi5kYXRlVG8pLFxuICAgICAgICAgICAgICAgIG4udXJsICYmIGJ1aWxkKCdhJywgbi51cmwsIDEpXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICB2YXIgZG9jRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGVtcFtpXSAmJiBkb2NGcmFnLmFwcGVuZENoaWxkKHRlbXBbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChkb2NGcmFnKTtcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh1bCk7XG4gICAgfSxcblxuICAgIGdldFBhcnQ6IGZ1bmN0aW9uKGRhdGEsIGUpIHtcbiAgICAgICAgaWYgKH5lLmluZGV4T2YoJy4nKSkge1xuXG4gICAgICAgICAgICAvLyBlIHJlZmVycyB0byBhIGNsYXNzbmFtZVxuICAgICAgICAgICAgZSA9IGUuc3Vic3RyKDEpO1xuXG4gICAgICAgICAgICAvLyBjcmVhdGluZyBhIGRpdiB3aXRoIGNsYXNzbmFtZSBlXG4gICAgICAgICAgICB2YXIgdGVtcCA9IMOnKHRoaXMuc2V0dGluZ3MuY3JlYXRlRWwpO1xuICAgICAgICAgICAgdGVtcC5jbGFzc0xpc3QuYWRkKGUpO1xuXG4gICAgICAgICAgICAvLyBhZGQgZGF0YSBhbmQgYXR0YWNoIGNsaWNrIGhhbmRsZXJcbiAgICAgICAgICAgIHRlbXAuaW5uZXJIVE1MID0gZGF0YTtcbiAgICAgICAgICAgIHRlbXAub25jbGljayA9IEludGVyYWN0LnRvZ2dsZUNsaWNrZWQ7XG5cbiAgICAgICAgICAgIC8vIGFwcGVuZCB0byBwYXJlbnQgPG1haW4+XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gw6kodGhpcy5zZXR0aW5ncy5wYXJlbnRFbCk7XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGVtcCk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgLy8gZSByZWZlcnMgdG8gYW4gZXhpc3RpbmcgZWxlbWVudFxuICAgICAgICAgICAgdmFyIGVsZW0gPSDDqShlKTtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSAobmV3KSBlbGVtZW50XG4gICAgICAgICAgICB0ZW1wID0gw6coZSk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBkYXRhXG4gICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IGRhdGE7XG5cbiAgICAgICAgICAgIHRlbXAub25jbGljayA9IEludGVyYWN0LnRvZ2dsZUNsaWNrZWQ7XG5cbiAgICAgICAgICAgIC8vIHJlcGxhY2UgZXhpc3RpbmcgZWxlbWVudCB3aXRoIG5ld1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZXBsYWNlQ2hpbGQodGVtcCwgZWxlbSk7XG4gICAgICAgICAgICBpZih+ZS5pbmRleE9mKCdhc2lkZScpKSBBZ2UuY2FsYygpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoUmVxdWVzdC5pc0luZGV4KCkpIFBhcnNlci5mZXRjaENvbnRlbnQoKTtcbiAgICAgICAgaWYgKFJlcXVlc3QuaXNQYWdlKCcvc3RhdHMvJykpIFBhcnNlci5mZXRjaEdpZ3MoKTsgUGFyc2VyLmZldGNoQmVlcigpO1xuICAgIH1cblxufTtcblxudmFyIEludGVyYWN0ID0ge1xuXG4gICAgdG9nZ2xlQ2xpY2tlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjbGlja2VkID0gdGhpcy5ub2RlTmFtZTtcbiAgICAgICAgaWYoY2xpY2tlZCA9PSAnSEVBREVSJ3x8dGhpcy5jbGFzc0xpc3QgPT0gJ2NvbnRhY3QnKXtcbiAgICAgICAgICAgIHZhciBlbCA9IMOpKCdoZWFkZXInKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTmFtZSA9PSAnY2xpY2tlZCcgPyBlbC5jbGFzc05hbWUgPSAncmV2ZXJzZScgOiBlbC5jbGFzc05hbWUgPSAnY2xpY2tlZCc7XG4gICAgICAgIH1cbiAgICB9XG5cbn07XG5cbnZhciBBZ2UgPSB7XG5cbiAgICBjYWxjOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGVsID0gw6koJ3RpbWUnKTtcbiAgICAgICAgdmFyIHRpbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGV0aW1lJyk7XG5cbiAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIG5vdyA9IFt0b2RheS5nZXRGdWxsWWVhcigpLCB0b2RheS5nZXRNb250aCgpKzEsICgnMCcgKyB0b2RheS5nZXREYXRlKCkpLnNsaWNlKC0yKV07XG4gICAgICAgIHZhciBiaXJ0aCA9IFt0aW1lLnNsaWNlKDAsNCksIHRpbWUuc2xpY2UoNSw3KSwgdGltZS5zbGljZSg4LDEwKV07XG5cbiAgICAgICAgbm93ID0gbm93LmpvaW4oJycpO1xuICAgICAgICBiaXJ0aCA9IGJpcnRoLmpvaW4oJycpO1xuXG4gICAgICAgIHZhciBhZ2UgPSAobm93IC0gYmlydGgpLnRvU3RyaW5nKCkuc2xpY2UoMCwyKTtcbiAgICAgICAgZWwuaW5uZXJIVE1MID0gYWdlICsgJywnO1xuICAgIH1cblxufTtcblxudmFyIFJlcXVlc3QgPSB7XG5cbiAgICBpc0luZGV4OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lID09ICcvJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaXNQYWdlOiBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lID09IHVybCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbn07XG5cbnZhciBUYWJsZXMgPSB7XG4gICAgLy8gTk9UIFVTRUQgT04gTUFJTiBQQUdFXG5cbiAgICBnaWdMaXN0OiBmdW5jdGlvbihuYW1lLCBsb2NhdGlvbiwgZGF0ZSkge1xuICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgdmFyIGxpc3QgPSDDqSgnI2dpZ2xpc3QgdGJvZHknKTtcbiAgICAgICAgdmFyIGdpZyA9IGA8dGQgY2xhc3M9XCJtZGwtZGF0YS10YWJsZV9fY2VsbC0tbm9uLW51bWVyaWMgZ2lnLW5hbWVcIj5cbiAgICAgICAgICAgICAgICAke25hbWV9XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzPVwibWRsLWRhdGEtdGFibGVfX2NlbGwtLW5vbi1udW1lcmljIGdpZy1sb2NhdGlvblwiPlxuICAgICAgICAgICAgICAgICR7bG9jYXRpb259XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzPVwiZ2lnLWRhdGVcIj4ke2RhdGV9PC90ZD5gO1xuXG4gICAgICAgIHZhciB0ciA9IMOnKCd0cicpO1xuICAgICAgICB0ci5pbm5lckhUTUwgPSBnaWc7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGZyYWcpO1xuICAgIH0sXG5cbiAgICBiZWVyTGlzdDogZnVuY3Rpb24oYnJld2VyeSwgYk5hbWUsIGJUeXBlLCBiQWJ2LCBiUmF0aW5nLCBiRGF0ZSkge1xuICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgdmFyIGxpc3QgPSDDqSgnI2JlZXJsaXN0IHRib2R5Jyk7XG4gICAgICAgIC8vWydicmV3ZXJ5JywgJ2JlZXItbmFtZScsICdiZWVyLXR5cGUnLCAnYmVlci1hYnYnLCAnYmVlci1yYXRpbmcnLCAnYmVlci1kYXRlJ11cbiAgICAgICAgdmFyIGJyZXcgPSBgPHRkIGNsYXNzPVwibWRsLWRhdGEtdGFibGVfX2NlbGwtLW5vbi1udW1lcmljIGJyZXdlcnlcIj5cbiAgICAgICAgICAgICAgICAke2JyZXdlcnl9XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzPVwibWRsLWRhdGEtdGFibGVfX2NlbGwtLW5vbi1udW1lcmljIGJlZXItbmFtZVwiPlxuICAgICAgICAgICAgICAgICR7Yk5hbWV9XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzPVwibWRsLWRhdGEtdGFibGVfX2NlbGwtLW5vbi1udW1lcmljIGJlZXItdHlwZVwiPlxuICAgICAgICAgICAgICAgICR7YlR5cGV9XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzPVwiYmVlci1hYnZcIj4ke2JBYnZ9PC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cImJlZXItcmF0aW5nXCI+JHtiUmF0aW5nfTwvdGQ+XG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJiZWVyLWRhdGVcIj4ke2JEYXRlfTwvdGQ+YDtcblxuICAgICAgICB2YXIgdHIgPSDDpygndHInKTtcbiAgICAgICAgdHIuaW5uZXJIVE1MID0gYnJldztcbiAgICAgICAgZnJhZy5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgfVxuXG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIFJlbmRlci5pbml0KCk7XG59KTtcbiJdfQ==
