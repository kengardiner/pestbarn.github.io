"use strict";var é=function(e){return document.querySelector(e)},ç=function(e){return document.createElement(e)},Parser=function(){function e(e){var t={ajax:function(e,t){var n=new Promise(function(n,r){var a=new XMLHttpRequest,i=t;a.open(e,i),a.send(),a.onload=function(){this.status>=200&&this.status<300?n(this.response):r(this.statusText)},a.onerror=function(){r(this.statusText)}});return n}};return{get:function(){return t.ajax("GET",e)}}}return{fetchContent:function(){function t(t,n){var r=n?t:"bin/js/json/"+t+".json",a={success:function(e){e=n?e:JSON.parse(e),n?Render.getPart(e,n):Render.buildList(e,t)},error:function(e){throw new Error(e)}};e(r).get().then(a.success).catch(a.error)}var n=new Map([["header","bin/partials/header.html"],[".contact","bin/partials/contact.html"],["aside","bin/partials/aside.html"]]),r=["experience"],a=!0,i=!1,s=void 0;try{for(var c,o=n[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var l=c.value;t(l[1],l[0])}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}var d=!0,u=!1,g=void 0;try{for(var f,m=r[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var h=f.value;t(h)}}catch(e){u=!0,g=e}finally{try{!d&&m.return&&m.return()}finally{if(u)throw g}}},fetchGigs:function(){var t="//spreadsheets.google.com/feeds/list/1Tf2vRy6me9F3knQSA5FpfvrTLuNetlkd0Mmb2P20Jqo/1/public/values?alt=json",n={success:function(e){var t=JSON.parse(e),n=t.feed.entry,r=t.feed.updated.$t;r="Last updated: "+r.substr(0,10),é("#attended-gigs .mdl-spinner").remove(),é("#gigs .mdl-tooltip").innerHTML=r;var a=document.getElementById("giglist");for(var i in n)if(i>0&&Tables.gigList(n[i].gsx$headline.$t,n[i].gsx$text.$t,n[i].gsx$startdate.$t),i==n.length-1){sorttable.makeSortable(a);var s={valueNames:["gig-name","gig-location","gig-date"]};new List("attended-gigs",s)}},error:function(e){throw new Error(e)}};e(t).get().then(n.success).catch(n.error)},fetchBeer:function(){var t="//spreadsheets.google.com/feeds/list/1a056ruITWMr8oeJECb8QM6ePe00IqTTEIkrkhY-QeMI/1/public/values?alt=json",n={success:function(e){var t=JSON.parse(e),n=t.feed.entry,r=t.feed.updated.$t;r="Last updated: "+r.substr(0,10),é("#untappd-stats .mdl-spinner").remove(),é("#beers .mdl-tooltip").innerHTML=r;var a=document.getElementById("beerlist");for(var i in n){var s=n[i].gsx$createdat.$t;if(s=s.substr(0,10),i>0&&Tables.beerList(n[i].gsx$breweryname.$t,n[i].gsx$beername.$t,n[i].gsx$beertype.$t,n[i].gsx$beerabv.$t,n[i].gsx$ratingscore.$t,s),i==n.length-1){sorttable.makeSortable(a);var c={valueNames:["brewery","beer-name","beer-type","beer-abv","beer-rating","beer-date"]};new List("untappd-stats",c)}}},error:function(e){throw new Error(e)}};e(t).get().then(n.success).catch(n.error)}}}(),Render={settings:{createEl:"div",parentEl:"main"},buildList:function(e,t){function n(e,t,n){return e=ç(e),e.appendChild(document.createTextNode(t)),n&&e.setAttribute("href","//"+t),e}e=e.items;var r=é("."+t),a=ç("ul"),i=!0,s=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){for(var d=o.value,u=ç("li"),g=[n("h2",d.title),n("h3",d.position),n("time",d.dateFrom),n("span","—"),n("time",d.dateTo),d.url&&n("a",d.url,1)],f=document.createDocumentFragment(),m=0;m<g.length;m++)g[m]&&f.appendChild(g[m]);u.appendChild(f),a.appendChild(u)}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}r.appendChild(a)},getPart:function(e,t){if(~t.indexOf(".")){t=t.substr(1);var n=ç(this.settings.createEl);n.classList.add(t),n.innerHTML=e,n.onclick=Interact.toggleClicked;var r=é(this.settings.parentEl);r.appendChild(n)}else{var a=é(t);n=ç(t),n.innerHTML=e,n.onclick=Interact.toggleClicked,document.body.replaceChild(n,a),~t.indexOf("aside")&&Age.calc()}},init:function(){if(Request.isIndex()&&Parser.fetchContent(),Request.isPage("/stats/")){Parser.fetchGigs(),Parser.fetchBeer();var e=document.location.hash;e&&!function(){var t=é('a[href="'+e+'"]');window.addEventListener("load",function(){t.click()})}()}}},Interact={toggleClicked:function(){var e=this.nodeName;if("HEADER"==e||"contact"==this.classList){var t=é("header");"clicked"==t.className?t.className="reverse":t.className="clicked"}}},Age={calc:function(){var e=é("time"),t=e.getAttribute("datetime"),n=new Date,r=[n.getFullYear(),n.getMonth()+1,("0"+n.getDate()).slice(-2)],a=[t.slice(0,4),t.slice(5,7),t.slice(8,10)];r=r.join(""),a=a.join("");var i=(r-a).toString().slice(0,2);e.innerHTML=i+","}},Request={isIndex:function(){if("/"==document.location.pathname)return!0},isPage:function(e){if(document.location.pathname==e)return!0}},Tables={gigList:function(e,t,n){var r=document.createDocumentFragment(),a=é("#giglist tbody"),i='<td class="mdl-data-table__cell--non-numeric gig-name">\n                '+e+'\n            </td>\n            <td class="mdl-data-table__cell--non-numeric gig-location">\n                '+t+'\n            </td>\n            <td class="gig-date">'+n+"</td>",s=ç("tr");s.innerHTML=i,r.appendChild(s),a.appendChild(r)},beerList:function(e,t,n,r,a,i){var s=document.createDocumentFragment(),c=é("#beerlist tbody"),o='<td class="mdl-data-table__cell--non-numeric brewery">\n                '+e+'\n            </td>\n            <td class="mdl-data-table__cell--non-numeric beer-name">\n                '+t+'\n            </td>\n            <td class="mdl-data-table__cell--non-numeric beer-type">\n                '+n+'\n            </td>\n            <td class="beer-abv">'+r+'</td>\n            <td class="beer-rating">'+a+'</td>\n            <td class="beer-date">'+i+"</td>",l=ç("tr");l.innerHTML=o,s.appendChild(l),c.appendChild(s)}};window.addEventListener("DOMContentLoaded",function(){Render.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiw6kiLCJzZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIsOnIiwiY3JlYXRlRWxlbWVudCIsIlBhcnNlciIsIiRodHRwIiwidXJsIiwiY29yZSIsImFqYXgiLCJtZXRob2QiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjbGllbnQiLCJYTUxIdHRwUmVxdWVzdCIsInVyaSIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwidGhpcyIsIm9ubG9hZCIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJnZXQiLCJmZXRjaENvbnRlbnQiLCJmZXRjaEZpbGUiLCJmIiwiZSIsImZpbGUiLCJjYWxsYmFjayIsInN1Y2Nlc3MiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiUmVuZGVyIiwiZ2V0UGFydCIsImJ1aWxkTGlzdCIsImVycm9yIiwiRXJyb3IiLCJ0aGVuIiwiY2F0Y2giLCJwYXJ0aWFscyIsIk1hcCIsImZpbGVzIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJwYXJ0IiwidmFsdWUiLCJlcnIiLCJyZXR1cm4iLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJmZXRjaEdpZ3MiLCJnaWdzIiwidGl0bGUiLCJjZWxscyIsImZlZWQiLCJlbnRyeSIsInVwZGF0ZWQiLCIkdCIsInN1YnN0ciIsInJlbW92ZSIsImlubmVySFRNTCIsInNvcnQiLCJnZXRFbGVtZW50QnlJZCIsInQiLCJUYWJsZXMiLCJnaWdMaXN0IiwiZ3N4JGhlYWRsaW5lIiwiZ3N4JHRleHQiLCJnc3gkc3RhcnRkYXRlIiwibGVuZ3RoIiwic29ydHRhYmxlIiwibWFrZVNvcnRhYmxlIiwib3B0aW9ucyIsInZhbHVlTmFtZXMiLCJMaXN0IiwiZmV0Y2hCZWVyIiwiZGF0ZVRyaW0iLCJiZWVyTGlzdCIsImdzeCRicmV3ZXJ5bmFtZSIsImdzeCRiZWVybmFtZSIsImdzeCRiZWVydHlwZSIsImdzeCRiZWVyYWJ2IiwiZ3N4JHJhdGluZ3Njb3JlIiwiYmVlciIsInNldHRpbmdzIiwiY3JlYXRlRWwiLCJwYXJlbnRFbCIsImJ1aWxkIiwiZWxlbWVudCIsImF0dHIiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiY29udGVudCIsInNldEF0dHJpYnV0ZSIsInBhcmVudCIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIm4iLCJ0ZW1wIiwicG9zaXRpb24iLCJkYXRlRnJvbSIsImRhdGVUbyIsImRvY0ZyYWciLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaSIsInVsIiwibGkiLCJpbmRleE9mIiwiY2xhc3NMaXN0IiwiYWRkIiwib25jbGljayIsIkludGVyYWN0IiwidG9nZ2xlQ2xpY2tlZCIsImVsZW0iLCJib2R5IiwicmVwbGFjZUNoaWxkIiwiQWdlIiwiY2FsYyIsIlJlcXVlc3QiLCJpc0luZGV4IiwiaXNQYWdlIiwiaGFzaCIsImxvY2F0aW9uIiwicmVsTGluayIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGljayIsImNsaWNrZWQiLCJub2RlTmFtZSIsImVsIiwiY2xhc3NOYW1lIiwidG9kYXkiLCJEYXRlIiwibm93IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJzbGljZSIsImJpcnRoIiwidGltZSIsInRvU3RyaW5nIiwiYWdlIiwicGF0aG5hbWUiLCJuYW1lIiwiZGF0ZSIsImZyYWciLCJsaXN0IiwiZ2lnIiwidHIiLCJqb2luIiwiYk5hbWUiLCJiVHlwZSIsImJBYnYiLCJiUmF0aW5nIiwiYkRhdGUiLCJicmV3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QTJELEdBd0RRRixFQUFLekQsWUFBWXdELElBcENqQnJCLFFBQUFDLGlCQUFXN0ksbUJBQVN1SCxXQUNwQm5GLE9BQUF5SSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIMOpID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xufTtcblxudmFyIMOnID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoc2VsZWN0b3IpO1xufTtcbi8qIGdsb2JhbCBzb3J0dGFibGUsIExpc3QgKi9cbi8qIGZvciBzaWxlbmNpbmcgZXNsaW50IGEgYml0ICovXG5cbnZhciBQYXJzZXIgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICBmdW5jdGlvbiAkaHR0cCh1cmwpe1xuICAgICAgICB2YXIgY29yZSA9IHtcbiAgICAgICAgICAgIGFqYXg6IGZ1bmN0aW9uKG1ldGhvZCwgdXJsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsaWVudCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJpID0gdXJsO1xuICAgICAgICAgICAgICAgICAgICBjbGllbnQub3BlbihtZXRob2QsIHVyaSk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudC5zZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvcmUuYWpheCgnR0VUJywgdXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuXG4gICAgICAgIGZldGNoQ29udGVudDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsZXQgcGFydGlhbHMgPSBuZXcgTWFwKFtcbiAgICAgICAgICAgICAgICBbJ2hlYWRlcicsICdiaW4vcGFydGlhbHMvaGVhZGVyLmh0bWwnXSxcbiAgICAgICAgICAgICAgICBbJy5jb250YWN0JywgJ2Jpbi9wYXJ0aWFscy9jb250YWN0Lmh0bWwnXSxcbiAgICAgICAgICAgICAgICBbJ2FzaWRlJywgJ2Jpbi9wYXJ0aWFscy9hc2lkZS5odG1sJ11cbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgbGV0IGZpbGVzID0gW1xuICAgICAgICAgICAgICAgICdleHBlcmllbmNlJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0aWFscykge1xuICAgICAgICAgICAgICAgIGZldGNoRmlsZShwYXJ0WzFdLCBwYXJ0WzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgICAgIGZldGNoRmlsZShmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZldGNoRmlsZShmLCBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBlID8gZiA6ICdiaW4vanMvanNvbi8nK2YrJy5qc29uJztcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBlID8gZGF0YSA6IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbmRlci5nZXRQYXJ0KGRhdGEsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIFJlbmRlci5idWlsZExpc3QoZGF0YSwgZik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICRodHRwKGZpbGUpLmdldCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FsbGJhY2suc3VjY2VzcylcbiAgICAgICAgICAgICAgICAuY2F0Y2goY2FsbGJhY2suZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBmZXRjaEdpZ3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBnaWdzID0gJy8vc3ByZWFkc2hlZXRzLmdvb2dsZS5jb20vZmVlZHMvbGlzdC8xVGYydlJ5Nm1lOUYza25RU0E1RnBmdnJUTHVOZXRsa2QwTW1iMlAyMEpxby8xL3B1YmxpYy92YWx1ZXM/YWx0PWpzb24nO1xuXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBjZWxscy5mZWVkLmVudHJ5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZCA9IGNlbGxzLmZlZWQudXBkYXRlZC4kdDtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZCA9IGBMYXN0IHVwZGF0ZWQ6ICR7dXBkYXRlZC5zdWJzdHIoMCwxMCl9YDtcbiAgICAgICAgICAgICAgICAgICAgw6koJyNhdHRlbmRlZC1naWdzIC5tZGwtc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICDDqSgnI2dpZ3MgLm1kbC10b29sdGlwJykuaW5uZXJIVE1MID0gdXBkYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2lnbGlzdCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgaW4gdGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID4gMCkgVGFibGVzLmdpZ0xpc3QodGl0bGVbdF0uZ3N4JGhlYWRsaW5lLiR0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVbdF0uZ3N4JHRleHQuJHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVt0XS5nc3gkc3RhcnRkYXRlLiR0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID09IHRpdGxlLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0dGFibGUubWFrZVNvcnRhYmxlKHNvcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU5hbWVzOiBbJ2dpZy1uYW1lJywgJ2dpZy1sb2NhdGlvbicsICdnaWctZGF0ZSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTGlzdCgnYXR0ZW5kZWQtZ2lncycsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRodHRwKGdpZ3MpLmdldCgpXG4gICAgICAgICAgICAudGhlbihjYWxsYmFjay5zdWNjZXNzKVxuICAgICAgICAgICAgLmNhdGNoKGNhbGxiYWNrLmVycm9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgZmV0Y2hCZWVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxldCBiZWVyID0gJy8vc3ByZWFkc2hlZXRzLmdvb2dsZS5jb20vZmVlZHMvbGlzdC8xYTA1NnJ1SVRXTXI4b2VKRUNiOFFNNmVQZTAwSXFUVEVJa3JraFktUWVNSS8xL3B1YmxpYy92YWx1ZXM/YWx0PWpzb24nO1xuXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbHMgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBjZWxscy5mZWVkLmVudHJ5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZCA9IGNlbGxzLmZlZWQudXBkYXRlZC4kdDtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZCA9IGBMYXN0IHVwZGF0ZWQ6ICR7dXBkYXRlZC5zdWJzdHIoMCwxMCl9YDtcbiAgICAgICAgICAgICAgICAgICAgw6koJyN1bnRhcHBkLXN0YXRzIC5tZGwtc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICDDqSgnI2JlZXJzIC5tZGwtdG9vbHRpcCcpLmlubmVySFRNTCA9IHVwZGF0ZWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JlZXJsaXN0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCBpbiB0aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVUcmltID0gdGl0bGVbdF0uZ3N4JGNyZWF0ZWRhdC4kdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUcmltID0gZGF0ZVRyaW0uc3Vic3RyKDAsMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiAwKSBUYWJsZXMuYmVlckxpc3QodGl0bGVbdF0uZ3N4JGJyZXdlcnluYW1lLiR0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVbdF0uZ3N4JGJlZXJuYW1lLiR0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVbdF0uZ3N4JGJlZXJ0eXBlLiR0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVbdF0uZ3N4JGJlZXJhYnYuJHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVt0XS5nc3gkcmF0aW5nc2NvcmUuJHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlVHJpbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9PSB0aXRsZS5sZW5ndGgtMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydHRhYmxlLm1ha2VTb3J0YWJsZShzb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVOYW1lczogWydicmV3ZXJ5JywgJ2JlZXItbmFtZScsICdiZWVyLXR5cGUnLCAnYmVlci1hYnYnLCAnYmVlci1yYXRpbmcnLCAnYmVlci1kYXRlJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBMaXN0KCd1bnRhcHBkLXN0YXRzJywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJGh0dHAoYmVlcikuZ2V0KClcbiAgICAgICAgICAgIC50aGVuKGNhbGxiYWNrLnN1Y2Nlc3MpXG4gICAgICAgICAgICAuY2F0Y2goY2FsbGJhY2suZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG59KSgpO1xuXG52YXIgUmVuZGVyID0ge1xuXG4gICAgc2V0dGluZ3M6IHtcbiAgICAgICAgY3JlYXRlRWw6ICdkaXYnLFxuICAgICAgICBwYXJlbnRFbDogJ21haW4nXG4gICAgfSxcblxuICAgIGJ1aWxkTGlzdDogZnVuY3Rpb24oZGF0YSwgZikge1xuICAgICAgICBkYXRhID0gZGF0YS5pdGVtcztcbiAgICAgICAgdmFyIHBhcmVudCA9IMOpKCcuJysgZik7XG4gICAgICAgIHZhciB1bCA9IMOnKCd1bCcpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkKGVsZW1lbnQsIGNvbnRlbnQsIGF0dHIpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSDDpyhlbGVtZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY29udGVudCkpO1xuICAgICAgICAgICAgYXR0ciAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICcvLycgKyBjb250ZW50KTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBsaSA9IMOnKCdsaScpO1xuXG4gICAgICAgICAgICB2YXIgdGVtcCA9IFtcbiAgICAgICAgICAgICAgICBidWlsZCgnaDInLCBuLnRpdGxlKSxcbiAgICAgICAgICAgICAgICBidWlsZCgnaDMnLCBuLnBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgICBidWlsZCgndGltZScsIG4uZGF0ZUZyb20pLFxuICAgICAgICAgICAgICAgIGJ1aWxkKCdzcGFuJywgJ+KAlCcpLFxuICAgICAgICAgICAgICAgIGJ1aWxkKCd0aW1lJywgbi5kYXRlVG8pLFxuICAgICAgICAgICAgICAgIG4udXJsICYmIGJ1aWxkKCdhJywgbi51cmwsIDEpXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICB2YXIgZG9jRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGVtcFtpXSAmJiBkb2NGcmFnLmFwcGVuZENoaWxkKHRlbXBbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChkb2NGcmFnKTtcbiAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh1bCk7XG4gICAgfSxcblxuICAgIGdldFBhcnQ6IGZ1bmN0aW9uKGRhdGEsIGUpIHtcbiAgICAgICAgaWYgKH5lLmluZGV4T2YoJy4nKSkge1xuXG4gICAgICAgICAgICAvLyBlIHJlZmVycyB0byBhIGNsYXNzbmFtZVxuICAgICAgICAgICAgZSA9IGUuc3Vic3RyKDEpO1xuXG4gICAgICAgICAgICAvLyBjcmVhdGluZyBhIGRpdiB3aXRoIGNsYXNzbmFtZSBlXG4gICAgICAgICAgICB2YXIgdGVtcCA9IMOnKHRoaXMuc2V0dGluZ3MuY3JlYXRlRWwpO1xuICAgICAgICAgICAgdGVtcC5jbGFzc0xpc3QuYWRkKGUpO1xuXG4gICAgICAgICAgICAvLyBhZGQgZGF0YSBhbmQgYXR0YWNoIGNsaWNrIGhhbmRsZXJcbiAgICAgICAgICAgIHRlbXAuaW5uZXJIVE1MID0gZGF0YTtcbiAgICAgICAgICAgIHRlbXAub25jbGljayA9IEludGVyYWN0LnRvZ2dsZUNsaWNrZWQ7XG5cbiAgICAgICAgICAgIC8vIGFwcGVuZCB0byBwYXJlbnQgPG1haW4+XG4gICAgICAgICAgICB2YXIgcGFyZW50ID0gw6kodGhpcy5zZXR0aW5ncy5wYXJlbnRFbCk7XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGVtcCk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgLy8gZSByZWZlcnMgdG8gYW4gZXhpc3RpbmcgZWxlbWVudFxuICAgICAgICAgICAgdmFyIGVsZW0gPSDDqShlKTtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSAobmV3KSBlbGVtZW50XG4gICAgICAgICAgICB0ZW1wID0gw6coZSk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBkYXRhXG4gICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IGRhdGE7XG5cbiAgICAgICAgICAgIHRlbXAub25jbGljayA9IEludGVyYWN0LnRvZ2dsZUNsaWNrZWQ7XG5cbiAgICAgICAgICAgIC8vIHJlcGxhY2UgZXhpc3RpbmcgZWxlbWVudCB3aXRoIG5ld1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZXBsYWNlQ2hpbGQodGVtcCwgZWxlbSk7XG4gICAgICAgICAgICBpZih+ZS5pbmRleE9mKCdhc2lkZScpKSBBZ2UuY2FsYygpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoUmVxdWVzdC5pc0luZGV4KCkpIFBhcnNlci5mZXRjaENvbnRlbnQoKTtcbiAgICAgICAgaWYgKFJlcXVlc3QuaXNQYWdlKCcvc3RhdHMvJykpe1xuICAgICAgICAgICAgUGFyc2VyLmZldGNoR2lncygpO1xuICAgICAgICAgICAgUGFyc2VyLmZldGNoQmVlcigpO1xuXG4gICAgICAgICAgICB2YXIgaGFzaCA9IGRvY3VtZW50LmxvY2F0aW9uLmhhc2g7XG4gICAgICAgICAgICBpZiAoaGFzaCkge1xuICAgICAgICAgICAgICAgIGxldCByZWxMaW5rID0gw6koJ2FbaHJlZj1cIicrIGhhc2ggKydcIl0nKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZWxMaW5rLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn07XG5cbnZhciBJbnRlcmFjdCA9IHtcblxuICAgIHRvZ2dsZUNsaWNrZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2xpY2tlZCA9IHRoaXMubm9kZU5hbWU7XG4gICAgICAgIGlmKGNsaWNrZWQgPT0gJ0hFQURFUid8fHRoaXMuY2xhc3NMaXN0ID09ICdjb250YWN0Jyl7XG4gICAgICAgICAgICB2YXIgZWwgPSDDqSgnaGVhZGVyJyk7XG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgPT0gJ2NsaWNrZWQnID8gZWwuY2xhc3NOYW1lID0gJ3JldmVyc2UnIDogZWwuY2xhc3NOYW1lID0gJ2NsaWNrZWQnO1xuICAgICAgICB9XG4gICAgfVxuXG59O1xuXG52YXIgQWdlID0ge1xuXG4gICAgY2FsYzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlbCA9IMOpKCd0aW1lJyk7XG4gICAgICAgIHZhciB0aW1lID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRldGltZScpO1xuXG4gICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBub3cgPSBbdG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSsxLCAoJzAnICsgdG9kYXkuZ2V0RGF0ZSgpKS5zbGljZSgtMildO1xuICAgICAgICB2YXIgYmlydGggPSBbdGltZS5zbGljZSgwLDQpLCB0aW1lLnNsaWNlKDUsNyksIHRpbWUuc2xpY2UoOCwxMCldO1xuXG4gICAgICAgIG5vdyA9IG5vdy5qb2luKCcnKTtcbiAgICAgICAgYmlydGggPSBiaXJ0aC5qb2luKCcnKTtcblxuICAgICAgICB2YXIgYWdlID0gKG5vdyAtIGJpcnRoKS50b1N0cmluZygpLnNsaWNlKDAsMik7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IGFnZSArICcsJztcbiAgICB9XG5cbn07XG5cbnZhciBSZXF1ZXN0ID0ge1xuXG4gICAgaXNJbmRleDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSA9PSAnLycpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGlzUGFnZTogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSA9PSB1cmwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG59O1xuXG52YXIgVGFibGVzID0ge1xuICAgIC8vIE5PVCBVU0VEIE9OIE1BSU4gUEFHRVxuXG4gICAgZ2lnTGlzdDogZnVuY3Rpb24obmFtZSwgbG9jYXRpb24sIGRhdGUpIHtcbiAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBsaXN0ID0gw6koJyNnaWdsaXN0IHRib2R5Jyk7XG4gICAgICAgIHZhciBnaWcgPSBgPHRkIGNsYXNzPVwibWRsLWRhdGEtdGFibGVfX2NlbGwtLW5vbi1udW1lcmljIGdpZy1uYW1lXCI+XG4gICAgICAgICAgICAgICAgJHtuYW1lfVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cIm1kbC1kYXRhLXRhYmxlX19jZWxsLS1ub24tbnVtZXJpYyBnaWctbG9jYXRpb25cIj5cbiAgICAgICAgICAgICAgICAke2xvY2F0aW9ufVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cImdpZy1kYXRlXCI+JHtkYXRlfTwvdGQ+YDtcblxuICAgICAgICB2YXIgdHIgPSDDpygndHInKTtcbiAgICAgICAgdHIuaW5uZXJIVE1MID0gZ2lnO1xuICAgICAgICBmcmFnLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICB9LFxuXG4gICAgYmVlckxpc3Q6IGZ1bmN0aW9uKGJyZXdlcnksIGJOYW1lLCBiVHlwZSwgYkFidiwgYlJhdGluZywgYkRhdGUpIHtcbiAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBsaXN0ID0gw6koJyNiZWVybGlzdCB0Ym9keScpO1xuICAgICAgICAvL1snYnJld2VyeScsICdiZWVyLW5hbWUnLCAnYmVlci10eXBlJywgJ2JlZXItYWJ2JywgJ2JlZXItcmF0aW5nJywgJ2JlZXItZGF0ZSddXG4gICAgICAgIHZhciBicmV3ID0gYDx0ZCBjbGFzcz1cIm1kbC1kYXRhLXRhYmxlX19jZWxsLS1ub24tbnVtZXJpYyBicmV3ZXJ5XCI+XG4gICAgICAgICAgICAgICAgJHticmV3ZXJ5fVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cIm1kbC1kYXRhLXRhYmxlX19jZWxsLS1ub24tbnVtZXJpYyBiZWVyLW5hbWVcIj5cbiAgICAgICAgICAgICAgICAke2JOYW1lfVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cIm1kbC1kYXRhLXRhYmxlX19jZWxsLS1ub24tbnVtZXJpYyBiZWVyLXR5cGVcIj5cbiAgICAgICAgICAgICAgICAke2JUeXBlfVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cImJlZXItYWJ2XCI+JHtiQWJ2fTwvdGQ+XG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJiZWVyLXJhdGluZ1wiPiR7YlJhdGluZ308L3RkPlxuICAgICAgICAgICAgPHRkIGNsYXNzPVwiYmVlci1kYXRlXCI+JHtiRGF0ZX08L3RkPmA7XG5cbiAgICAgICAgdmFyIHRyID0gw6coJ3RyJyk7XG4gICAgICAgIHRyLmlubmVySFRNTCA9IGJyZXc7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGZyYWcpO1xuICAgIH1cblxufTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgICBSZW5kZXIuaW5pdCgpO1xufSk7XG4iXX0=
